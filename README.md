# ludbots
CS 396 Artificial Life

# Assignment 8 Final Project (Science)
# Hypothesis: The parallel hill climbing (PHC) method is a slower and less effective method of evolution than top k selection (TK) and parallel top k (PTK) selection, with top k selection being the fastest, but parallel top k selection being more effective long term. 

The null hypothesis is that there is no significant difference in the performance of the three algorithms, while the alternative hypothesis is that there is a significant difference in the performance of at least one algorithm.

# Experiment
Utilize the three evolution algorithms (parallel hill climber, top k selection, and parallel top k selection) to evolve locomotion for a constant population size of 200, 50 generations, k value of 10, and for 10 trials each and compare which one is most effective at optimizing fitness. For a total of 300,000 simulated creatures.

# Evolution Algorithms
- Parallel hill climbing: This method performs hill climbing with 200 parents in parallel with one another. 
  200 Parents -> 200 Children -> For each child parent pair pick best one as next parent -> Repeat
  
  ![image](https://user-images.githubusercontent.com/71994929/225128502-d07ca65e-74e3-4a00-a43e-40cbd4e9197b.png)

  
- Top k selection: This method is more of a pool based method where the top performers each have 20 children and everyone competes against everyone
  200 Parents -> Top 10 selected -> 20 children each -> Evaluate Children -> Replace parents if children do better -> Repeat
  
![image](https://user-images.githubusercontent.com/71994929/225134414-edaf7fb4-17e1-4758-8c9c-ecc451cc38e0.png)
  
- Parallel Top k selection: This method is similar to top k but is basically performing smaller population size top k with no cross over between sections
  10 Sections of 20 parents -> Top performer in each section selected -> Each section repopulated with children of top performer -> Repeat
  
 ![image](https://user-images.githubusercontent.com/71994929/225134452-33d006a9-3732-45f8-83dc-fbf77542dea5.png)


# Evolution method
The aspects being evolved are:
- The number of links in the body
- The direction of the joints
- The placement and orientation of the connections
- The placement and number of sensors
- The weighted connections in the brain

# Body Generation
Bodies are generated by recursively branching off of itself in a tree like structure

![image](https://user-images.githubusercontent.com/71994929/224789866-c5a0fa80-9682-451f-8ad6-ff50945dc551.png)
![image](https://user-images.githubusercontent.com/71994929/219985253-679fc2ae-9e22-400a-8149-31074bdc24b9.png)


# Brain Generation
Brains are generated by randomly connecting each sensor neuron to each motor neuron

![image](https://user-images.githubusercontent.com/71994929/221658511-99b39269-b4fc-4b36-af75-feec3664d35b.png)

# Mutation
Two weights in the brain are randomly changed
![image](https://user-images.githubusercontent.com/71994929/221658858-36d37d13-561e-4f9b-9ac7-201b0cbff512.png)

And there is a 20% chance new nodes are added or removed or both to the existing creature
![image](https://user-images.githubusercontent.com/71994929/221660146-93e3dbc3-34d6-4e8b-b442-5014139a1bf1.png)

The tree is generated recursively. Given a link it creates a random number of children links from it orthoganal to its surfaces, the lower the depth more likely it is to have children. The children links are connected via a joint with a random axis of rotation. Each link is randomly sized. Before children are added their absolute coordinates are checked to ensure they do not overlap with any existing links. Sensors are also randomly added to some links and their colors are green, non sensor links are blue.

#Example bodies (Link dimensions were set to constant of 1 to better illustrate the structure of the creatures)

![image](https://user-images.githubusercontent.com/71994929/219984596-b5018e4c-8165-41f3-bbaa-cbcd474611e7.png)
![image](https://user-images.githubusercontent.com/71994929/219984674-ba58ce83-8f07-4fed-b704-9db52cab1c14.png)

# Fitness function
The fitness funtion used to evaluate the ability of the bots is the square of the distance from the origin in the x, y plane.

# Results
Fitness plots for each of the three methods

![image](https://user-images.githubusercontent.com/71994929/224786653-cc20cd06-9d6d-4314-834b-1f61c5b7ee95.png)
![image](https://user-images.githubusercontent.com/71994929/224786709-5b68878f-ca64-44ce-aa13-ba01dc41d4a2.png)
![image](https://user-images.githubusercontent.com/71994929/224863706-8e1a474f-ad99-4225-9964-e39ed691ce05.png)
# Analysis
![image](https://user-images.githubusercontent.com/71994929/224863751-9422a564-45e6-48e3-b742-d2f01ea2ff03.png)

In order to determine the effectiveness of the three evolution algorithms I plotted the average fitness for each method at each generation across the 10 trials. As evident from the graph parallel top k performs the best by a significant margin. Top K outperforms the hillclimber initially but after many generations the PHC starts to do better. All three exhibit logarithmic growth with Top K flattening out more than the other methods.

![image](https://user-images.githubusercontent.com/71994929/225123548-4c566354-9d32-4dec-8d74-77a06db25749.png)
Here is a plot of the max fitness values at each generation across all 10 trials and 50 generations for each evolution method.
The corresponding F and P values are as follows:
F-value: 127.44076719837632
P-value: 7.766465412549422e-52

Given the high F value and Extremely low P value we can be confident in saying our results reject the null hypothesis and there is a significant difference in the performance of the three algorithms.

We also will compare the final fitness values of each trail for each algorithm.

![image](https://user-images.githubusercontent.com/71994929/225124635-5554e5af-c3e7-4856-9946-36dd4ff2d3f3.png)
Here is a plot of the max fitness values for each of the 10 trials for each evolution method.
The corresponding F and P values are as follows:
F-value: 4.1169694621203865
P-value: 0.027506456999200138

Given the high F value and low P value we can also say there is a difference in the final performance of the algorithms after 50 trials.

# Conclusion
From the analysis above we can conclude that there is a significant difference in the performance of the evolutionary algorithms both in there performance throughout the 50 generations and in there final performance at the end of the 50 generations.

# Run it yourself
- Clone repo
- Install packages
- Run search.py

# Sources: https://www.reddit.com/r/ludobots/


